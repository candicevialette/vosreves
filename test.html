<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Demande d'information - Votre Agence</title>
    <meta name="description" content="Proposez votre propre récit de voyage et partagez votre 'journée à...' avec la communauté de Vos Rêves.">
    
    <!-- Lien vers les polices Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lato:wght@400;700&family=Montserrat:wght@600;700&display=swap" rel="stylesheet">

    <!-- ▼▼▼ LIEN VERS VOTRE FEUILLE DE STYLE CSS ▼▼▼ -->
    <link rel="stylesheet" href="css/style.css"> 
    <!-- ▲▲▲ Assurez-vous que le chemin est correct ! ▲▲▲ -->

</head>
<body class="form-page-body">
    <div class="animation-background">
        <div class="fish">
            <!-- SVG d'un poisson -->
            <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg"><path d="M99.12,23.49a2,2,0,0,0-1.23-1.83,12.78,12.78,0,0,1-8-8.25c-1-3.44-6.19-3.23-6.19-3.23a27.1,27.1,0,0,0-15.1,1.59,27.24,27.24,0,0,0-15.1,1.59S48,10.23,47,13.67a12.78,12.78,0,0,1-8,8.25,2,2,0,0,0-1.23,1.83L0,25l37.77,1.51a2,2,0,0,0,1.23,1.83,12.78,12.78,0,0,1,8,8.25c1,3.44,6.19,3.23,6.19,3.23a27.1,27.1,0,0,0,15.1-1.59,27.24,27.24,0,0,0,15.1-1.59S97,41.23,98,37.79a12.78,12.78,0,0,1,8-8.25,2,2,0,0,0,1.23-1.83Z" fill="currentColor"/></svg>
        </div>
        <div class="fish">
             <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg"><path d="M99.12,23.49a2,2,0,0,0-1.23-1.83,12.78,12.78,0,0,1-8-8.25c-1-3.44-6.19-3.23-6.19-3.23a27.1,27.1,0,0,0-15.1,1.59,27.24,27.24,0,0,0-15.1,1.59S48,10.23,47,13.67a12.78,12.78,0,0,1-8,8.25,2,2,0,0,0-1.23,1.83L0,25l37.77,1.51a2,2,0,0,0,1.23,1.83,12.78,12.78,0,0,1,8,8.25c1,3.44,6.19,3.23,6.19,3.23a27.1,27.1,0,0,0,15.1-1.59,27.24,27.24,0,0,0,15.1-1.59S97,41.23,98,37.79a12.78,12.78,0,0,1,8-8.25,2,2,0,0,0,1.23-1.83Z" fill="currentColor"/></svg>
        </div>
        <div class="fish">
            <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg"><path d="M99.12,23.49a2,2,0,0,0-1.23-1.83,12.78,12.78,0,0,1-8-8.25c-1-3.44-6.19-3.23-6.19-3.23a27.1,27.1,0,0,0-15.1,1.59,27.24,27.24,0,0,0-15.1,1.59S48,10.23,47,13.67a12.78,12.78,0,0,1-8,8.25,2,2,0,0,0-1.23,1.83L0,25l37.77,1.51a2,2,0,0,0,1.23,1.83,12.78,12.78,0,0,1,8,8.25c1,3.44,6.19,3.23,6.19,3.23a27.1,27.1,0,0,0,15.1-1.59,27.24,27.24,0,0,0,15.1-1.59S97,41.23,98,37.79a12.78,12.78,0,0,1,8-8.25,2,2,0,0,0,1.23-1.83Z" fill="currentColor"/></svg>
        </div>
        <div class="fish">
            <svg viewBox="0 0 100 50" xmlns="http://www.w3.org/2000/svg"><path d="M99.12,23.49a2,2,0,0,0-1.23-1.83,12.78,12.78,0,0,1-8-8.25c-1-3.44-6.19-3.23-6.19-3.23a27.1,27.1,0,0,0-15.1,1.59,27.24,27.24,0,0,0-15.1,1.59S48,10.23,47,13.67a12.78,12.78,0,0,1-8,8.25,2,2,0,0,0-1.23,1.83L0,25l37.77,1.51a2,2,0,0,0,1.23,1.83,12.78,12.78,0,0,1,8,8.25c1,3.44,6.19,3.23,6.19,3.23a27.1,27.1,0,0,0,15.1-1.59,27.24,27.24,0,0,0,15.1-1.59S97,41.23,98,37.79a12.78,12.78,0,0,1,8-8.25,2,2,0,0,0,1.23-1.83Z" fill="currentColor"/></svg>
        </div>
    </div>

    <div class="submission-container">
        <div class="submission-header">
            <h1>Reservez dès maintenant votre séjour</h1>
            <p class="page-intro">N'attendez plus, échanger avec notre agence la plus proche pour réserver votre séjour idyllique. Nous prendrons contact avec vous sous 8jours avec des propositions de voyage.</p>
        </div>

        <form id="info-form" class="submission-form">
            <div class="form-group">
                <label for="prenom">Votre nom :</label>
                <input type="text" id="nom" name="nom" required>
            </div>
            <div class="form-group">
                <label for="initiale_nom">Prénom :</label>
                <input type="text" id="Prénom" name="Prénom" maxlength="1" required>
            </div>
            <div class="form-group">
                <label for="email">Votre adresse mail :</label>
                <input type="email" id="email" name="email" placeholder="exemple@domaine.com" required>
                </div>
            <!-- Section Projet -->
                    <div class="form-group">
                        <label for="projet">Descriptif de votre projet (*) :</label>
                        <textarea id="projet" name="projet" rows="8" placeholder="Ex: Voyage en famille, lune de miel, centres d'intérêt..." required></textarea>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="date_depart">Date de départ approximative :</label>
                            <input type="date" id="date_depart" name="date_depart">
                        </div>
                        <div class="form-group">
                            <label for="duree">Durée envisagée en jours :</label>
                            <input type="number" id="duree" name="duree" min="1">
                        </div>
                    </div>

                    <!-- Section Choix -->
                    <fieldset class="form-group">
                        <legend>Zone géographique :</legend>
                        <div class="radio-group">
                            <label><input type="radio" name="zone" value="Polynesie"> Polynésie</label>
                            <label><input type="radio" name="zone" value="Amerique du nord"> Amérique du nord</label>
                            <label><input type="radio" name="zone" value="Europe"> Europe</label>
                        </div>
                    </fieldset>

                    <fieldset class="form-group">
                        <legend>Type d'informations désirées :</legend>
                        <div class="checkbox-group">
                            <label><input type="checkbox" name="infos" value="Transport"> Transport (vol, ...)</label>
                            <label><input type="checkbox" name="infos" value="Hebergement"> Hébergement (hôtel, pension, ...)</label>
                            <label><input type="checkbox" name="infos" value="Excursion"> Excursion</label>
                        </div>
                    </fieldset>

                    <!-- Section Agence -->
                    <fieldset class="form-group">
                        <legend>Veuillez indiquer l'agence qui prendra en charge votre demande (*) :</legend>
                        <div class="radio-group">
                            <label><input type="radio" name="agence" value="Bordeaux" required> Bordeaux</label>
                            <label><input type="radio" name="agence" value="Lyon"> Lyon</label>
                            <label><input type="radio" name="agence" value="Marseille"> Marseille</label>
                        </div>
                    </fieldset>
            <div class="form-actions">
                <button type="submit" id="submit-btn" class="btn-primary">Soumettre</button>
            </div>
            <p id="form-status"></p>
        </form>
    </div>

  <!-- Le JavaScript qui fera fonctionner le formulaire se trouvera ici -->
     <script>
        const form = document.getElementById('info-form');
        const statusMessage = document.getElementById('form-status');
        const submitButton = document.getElementById('submit-btn');

        // COLLEZ L'URL DE VOTRE APPLICATION WEB GOOGLE ICI
        const googleAppScriptUrl = 'https://script.google.com/macros/s/AKfycby3em_z_lPlykqCff8h276QFUCIpPaZL57Keyst13v3D92GlnLZMo997morhKLYbbN4ZA/exec';

        form.addEventListener('submit', event => {
            event.preventDefault();

            statusMessage.textContent = 'Envoi en cours...';
            statusMessage.style.color = '#333';
            submitButton.disabled = true;

            const formData = new FormData(form);
            const data = Object.fromEntries(formData.entries());

            // Gérer les checkboxes pour les envoyer comme une liste
            data.infos = formData.getAll('infos');

            // Ajout des données requises par le professeur
            data.date_creation = new Date().toISOString();
            data.etat = "Nouveau";

            fetch(googleAppScriptUrl, {
                method: 'POST',
                mode: 'no-cors', // Important pour ce type de requête
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify(data)
            })
            .then(response => {
                statusMessage.textContent = 'Merci ! Votre demande a bien été envoyée.';
                statusMessage.style.color = 'green';
                form.reset();
            })
            .catch(error => {
                statusMessage.textContent = 'Erreur lors de l\'envoi. Veuillez réessayer plus tard.';
                statusMessage.style.color = 'red';
                console.error('Error:', error);
            })
            .finally(() => {
                submitButton.disabled = false;
            });
        });
    </script>
</body>
</html>
